<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>isNineSun&#39;s Blog</title>
  
  
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2022-02-25T12:00:02.611Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>NineSun</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>基于mqtt技术的城市智能路灯系统设计</title>
    <link href="http://yoursite.com/2022/02/16/Mqtt_CityLighting/"/>
    <id>http://yoursite.com/2022/02/16/Mqtt_CityLighting/</id>
    <published>2022-02-16T08:38:04.000Z</published>
    <updated>2022-02-25T12:00:02.611Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>这是一个城市智能路灯系统的设计，设计硬件部分本身并不复杂，实现的基本功能就是自动模式下判断环境情况（有无人/有无光/有无声音）然后开启/关闭照明的一个设计。因此本次设计的重心在于Mqtt的协议的学习和使用。看过笔者前几篇博客的应该明白，笔者之前的几个物联网设计更多的是倾向于第三方的开源平台（如：点灯科技）。用第三方开源平台来做物联网项目并无不可，<strong>但对于一个电子爱好者也好，或者说一个极客来说，总是依赖第三方终归是差了点儿意思，简单的安卓开发也是物联网中不可或缺的一环，因此诞生了这么一个项目。</strong> 笔者之前学习过一些java，但Android Studio接触是第一次，因此这个项目也是一次对as开发的学习。</p><span id="more"></span><h2 id="一、原件清单"><a href="#一、原件清单" class="headerlink" title="一、原件清单"></a>一、原件清单</h2><ul><li>nodeMCU</li><li>ssd1306</li><li>光敏传感器</li><li>人体热释传感器</li><li>声音传感器</li><li>一路5V继电器</li><li>LED灯泡（5V）</li><li>18650锂电池*2</li><li>18650电池盒</li><li>跳线，接线端子，焊锡等耗材</li><li>npn三极管  </li></ul><hr><h2 id="二、Mqtt协议简介"><a href="#二、Mqtt协议简介" class="headerlink" title="二、Mqtt协议简介"></a>二、Mqtt协议简介</h2><p>虽然我个人不太喜欢过多的对定义去进行说明，但是接触一个新的概念这种事是难免的，因此在下面贴上<a href="https://www.runoob.com/w3cnote/mqtt-intro.html">菜鸟教程</a>给的定义。  </p><blockquote><p>MQTT（Message Queuing Telemetry Transport，消息队列遥测传输协议），是一种基于发布/订阅（publish/subscribe）模式的”轻量级”通讯协议，该协议构建于TCP/IP协议上，由IBM在1999年发布。MQTT最大优点在于，可以以极少的代码和有限的带宽，为连接远程设备提供实时可靠的消息服务。作为一种低开销、低带宽占用的即时通讯协议，使其在物联网、小型设备、移动应用等方面有较广泛的应用。<br>MQTT是一个基于客户端-服务器的消息发布/订阅传输协议。MQTT协议是轻量、简单、开放和易于实现的，这些特点使它适用范围非常广泛。在很多情况下，包括受限的环境中，如：机器与机器（M2M）通信和物联网（IoT）。其在，通过卫星链路通信传感器、偶尔拨号的医疗设备、智能家居、及一些小型化设备中已广泛使用。  </p></blockquote><p>按照笔者自己的理解，mqtt与微博订阅的模式非常相近，微博（云服务器）的用户有我（设备）和刘谦（客户端），我关注了刘谦但是刘谦没有关注我，当刘谦发送了一条消息出去，本质上是发送给了微博的服务器，再由微博将刘谦的消息发送给关注了刘谦的人，比如我，这样我就可以接受到刘谦的消息了，反之，若是我发一条消息，因为刘谦没关注我，因此刘谦就收不到我发送的信息。  </p><hr><h2 id="三、硬件连接"><a href="#三、硬件连接" class="headerlink" title="三、硬件连接"></a>三、硬件连接</h2><p>稍微说一些Mqtt的概念之后还是绕回到老话题——硬件设计上，等到将整个硬件设计讲述完之后再继续深入介绍如何实现mqtt通信。<br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpv86zcquj30h30daqaj.jpg" alt="硬件连接.png"><br><em>PS：这里笔者简单画了一个图，读者意会即可，仅仅是代表硬件的连线，并不是仿真图也不是电路图。</em><br>以下为具体连线表：<br><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gzpzcs2ntej30mx07fq5k.jpg" alt="连线表.png"></p><h2 id="四、硬件-软件流程图"><a href="#四、硬件-软件流程图" class="headerlink" title="四、硬件/软件流程图"></a>四、硬件/软件流程图</h2><p><strong>软件流程图：</strong><br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpw3fn01cj30g30esgmc.jpg" alt="软件流程图.png"><br><strong>硬件流程图：</strong><br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpw3fs3q7j30a90jhwfd.jpg" alt="硬件自动模式流程图.png">  </p><hr><h2 id="四、程序代码"><a href="#四、程序代码" class="headerlink" title="四、程序代码"></a>四、程序代码</h2><p>首先先放出硬件部分的代码。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;SSD1306Wire.h&quot;</span><br><span class="line">#include &lt;ESP8266WiFi.h&gt;</span><br><span class="line">#include &lt;PubSubClient.h&gt;</span><br><span class="line">WiFiClient espClient;</span><br><span class="line">PubSubClient client (espClient);</span><br><span class="line">const char* wifissid=&quot;test&quot;;</span><br><span class="line">const char* password=&quot;12345678&quot;;</span><br><span class="line">const char* mqtt_server=&quot;101.43.207.139&quot;;</span><br><span class="line">const char* mqtt_id=&quot;isNineSun_ESP&quot;;</span><br><span class="line">const char* Mqtt_sub_topic=&quot;pub_ywt&quot;;</span><br><span class="line">const char* Mqtt_pub_topic=&quot;sub_ywt&quot;;</span><br><span class="line">long lastMsg=0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int MIC = 4;        // D0 麦克风引脚连接开发板数字接口 2</span><br><span class="line">int LED = 0;        // LED  正极连接开发板数字接口3</span><br><span class="line">int HC = 15;</span><br><span class="line">int D_in=16;</span><br><span class="line">int VALOR;        // DO变量值</span><br><span class="line">int LEDDO;       // LED变量 </span><br><span class="line">int HoneWai;</span><br><span class="line">int Lighting; </span><br><span class="line">bool auto_mode=1,led_mode=1; </span><br><span class="line"></span><br><span class="line">static const uint8_t wu_you[][32]=&#123;0x00,0x80,0x40,0x40,0x42,0x20,0x42,0x10,0x42,0x0C,0xC2,0x03,0x7E,0x00,0x42,0x00,0xC2,0x3F,0x42,0x40,0x42,0x40,0x42,0x40,0x40,0x40,0x40,0x70,0x00,0x00,0x00,0x00,/*无0*/</span><br><span class="line">                 0x04,0x04,0x04,0x02,0x04,0x01,0x84,0x00,0xE4,0xFF,0x3C,0x09,0x27,0x09,0x24,0x09,0x24,0x09,0x24,0x49,0x24,0x89,0xE4,0x7F,0x04,0x00,0x04,0x00,0x04,0x00,0x00,0x00,/*有0*/&#125;;</span><br><span class="line">static const uint8_t ren[][32]=&#123;0x00,0x80,0x00,0x40,0x00,0x20,0x00,0x10,0x00,0x0C,0x00,0x03,0xC0,0x00,0x3F,0x00,0xC0,0x00,0x00,0x03,0x00,0x0C,0x00,0x10,0x00,0x20,0x00,0x40,0x00,0x80,0x00,0x00,/*人0*/&#125;;</span><br><span class="line">static const uint8_t sheng[][32]=&#123;0x04,0x80,0x14,0x60,0xD4,0x1F,0x54,0x02,0x54,0x02,0x54,0x02,0x54,0x02,0xDF,0x03,0x54,0x02,0x54,0x02,0x54,0x02,0x54,0x02,0xD4,0x03,0x14,0x00,0x04,0x00,0x00,0x00,/*声0*/&#125;;</span><br><span class="line">static const uint8_t guang[][32]=&#123;0x40,0x80,0x40,0x80,0x42,0x40,0x44,0x20,0x58,0x18,0xC0,0x07,0x40,0x00,0x7F,0x00,0x40,0x00,0xC0,0x3F,0x50,0x40,0x48,0x40,0x46,0x40,0x40,0x40,0x40,0x78,0x00,0x00,/*光0*/&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const uint8_t image1[] PROGMEM =&#123;</span><br><span class="line">0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,</span><br><span class="line">0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x01,0x00,0x00,0x00,0x00,0x00,0xF0,0xFC,0x01,0x00,0x00,0xF8,0xFF,0x3F,0xFF,0xFF,0x7F,0x00,0x00,0xF8,0xFF,0x7F,0xFF,0xF1,0x7F,0x00,0x00,0xF8,0xFF,0x7F,0xFF,0xE4,0x7F,0x00,0x00,0xF8,0xFF,0x7F,0x7F,0x9E,0x7F,0x00,</span><br><span class="line">0x00,0x78,0xCE,0x79,0x60,0x3E,0x00,0x00,0x00,0x7E,0xCE,0x79,0x0C,0xBC,0x39,0x00,0x00,0x7F,0xCE,0x79,0x9C,0x99,0x7B,0x00,0x00,0x7F,0xCE,0x79,0xDC,0xA3,0x7B,0x00,0x00,0x7F,0xCE,0x79,0xFF,0xBF,0x7F,0x00,0x00,0x7F,0xCE,0x79,0xFF,0xBF,0x3F,0x00,0x00,0x7E,0xCE,0x79,0xFF,0xF6,0x3F,0x00,0x00,0x78,0xCE,0x79,</span><br><span class="line">0xDF,0xF6,0x1F,0x00,0x00,0x78,0xCE,0x79,0xDE,0xF6,0x0F,0x00,0x00,0xF8,0xFF,0x7F,0xDE,0xF6,0x07,0x00,0x00,0xF8,0xFF,0x7F,0xFF,0xF6,0x3F,0x00,0x00,0xF8,0xFF,0x7F,0xFF,0xB6,0x3F,0x00,0x00,0xF8,0xFF,0x3F,0xFF,0xBF,0x7F,0x00,0x00,0xE0,0xFF,0x1F,0xDE,0xBF,0x7B,0x00,0x00,0x00,0x00,0x00,0xDC,0xBF,0x7B,0x00,</span><br><span class="line">0x00,0x00,0x00,0x00,0x1C,0x80,0x7B,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x3E,0x70,0x00,0x00,0x00,0x00,0x9E,0xC3,0x3F,0xF0,0x1C,0x38,0x00,0x00,0x9E,0xFB,0x3F,0xF0,0x1E,0x3C,0x00,0x00,0x9E,0xFF,0x3F,0xF0,0x1E,0x3C,0x00,0x00,0x9E,0xFF,0x3F,</span><br><span class="line">0xF0,0x3E,0x3E,0x00,0x00,0x9E,0xDF,0x3D,0xF0,0xFE,0x3F,0x00,0x00,0x9E,0x0F,0x3C,0xF0,0xFE,0x3F,0x00,0x00,0x9E,0x67,0x3C,0xF0,0xFE,0x3F,0x00,0x00,0x9E,0xF3,0x3F,0xF0,0xFE,0x3F,0x00,0x00,0x86,0xF3,0x3F,0xF0,0x3E,0x1E,0x00,0x00,0x32,0xC3,0x3F,0xF0,0x1E,0x1E,0x00,0x00,0x70,0x00,0x1F,0xFC,0x1C,0x1E,0x00,</span><br><span class="line">0x00,0x70,0x70,0x40,0xFF,0x01,0x1E,0x00,0x00,0xFE,0xFF,0x77,0xFF,0x77,0x0C,0x00,0x00,0xFF,0xFF,0x3F,0xFB,0xFF,0x01,0x00,0x00,0xFF,0xFF,0x03,0xE0,0xFF,0x0F,0x00,0x00,0xFF,0x1F,0x38,0xEE,0xFF,0x1F,0x00,0x00,0x78,0x00,0x78,0xCE,0xF0,0x3F,0x00,0x00,0x70,0x00,0x7C,0x9E,0x80,0x7C,0x00,0x00,0xF0,0xFF,0x7F,</span><br><span class="line">0x9E,0x00,0x7F,0x00,0x00,0xF0,0xFF,0x7F,0x9C,0x00,0x7F,0x00,0x00,0xF0,0xFF,0x3F,0xC0,0x00,0x3F,0x00,0x00,0x40,0x00,0x00,0x60,0x00,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,</span><br><span class="line">0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*C:\Users\NineSun\Desktop\未标题-1.bmp0*/</span><br><span class="line">&#125;;</span><br><span class="line">const uint8_t image2[] PROGMEM =&#123;</span><br><span class="line">0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,</span><br><span class="line">0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x38,0x70,0x00,0x00,0x00,0xC0,0x79,0x00,0x78,0xF8,0x00,0x00,0x00,0xCE,0x7B,0x00,0x78,0xFE,0x00,0x00,0x00,0xCF,0x7B,0x80,0xFF,0xFF,0x3F,0x00,0x00,0xCF,0x7B,0x80,0xFF,0xF8,0x3F,0x00,0x00,0xCF,0x7B,0xBC,0x7F,0xF2,0x3F,0x00,0x00,0xCF,0x7B,0xBE,0x3F,0xEF,0x3F,0x00,</span><br><span class="line">0x00,0xCF,0x7B,0x3E,0x30,0x1F,0x00,0x00,0x00,0xCF,0x7B,0x3E,0x0E,0xDE,0x1D,0x00,0x00,0xFF,0xFF,0x3F,0xCE,0xCC,0x3D,0x00,0x00,0xFF,0xFF,0x3F,0xEF,0xD1,0x3D,0x00,0x00,0xFF,0xFF,0xBF,0xFF,0xDF,0x3F,0x00,0x00,0xFF,0xFF,0xBF,0xFF,0xDF,0x1F,0x00,0x00,0xFF,0xFF,0xBF,0x7F,0xFB,0x1F,0x00,0x00,0xCF,0x7B,0x80,</span><br><span class="line">0x7F,0xFB,0x0F,0x00,0x00,0xCF,0x7B,0x00,0x6F,0xFB,0x07,0x00,0x00,0xCF,0x7B,0x00,0x6F,0xFB,0x03,0x00,0x80,0xCF,0x7B,0x80,0x7F,0xFB,0x1F,0x00,0x80,0xCF,0x7B,0x80,0xFF,0xDF,0x1F,0x00,0x00,0xC7,0x7B,0x80,0xFF,0xDF,0x3F,0x00,0x00,0xC7,0x7B,0x00,0xEF,0xDF,0x3D,0x00,0x00,0xC0,0x79,0x00,0xEE,0xDF,0x3D,0x00,</span><br><span class="line">0x00,0x00,0x70,0x00,0x0E,0xC0,0x3D,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x1F,0x78,0x00,0x00,0x00,0x00,0xCF,0xE1,0x1F,0x7C,0x0E,0x1E,0x00,0x00,0xCF,0xFF,0x1F,0x7C,0x1F,0x1E,0x00,0x00,0xCF,0xFF,0x1F,0x7C,0x1F,0x3E,0x00,0x00,0xCF,0xFF,0x1F,</span><br><span class="line">0x7C,0xFF,0x1F,0x00,0x00,0xCF,0xFF,0x1E,0x7C,0xFF,0x1F,0x00,0x00,0xCF,0x07,0x1E,0x7C,0xFF,0x1F,0x00,0x00,0xCF,0x3B,0x1E,0x7C,0xFF,0x1F,0x00,0x00,0xCF,0xF9,0x1F,0x7C,0xFF,0x1F,0x00,0x00,0xC3,0xF9,0x1F,0x7C,0x1F,0x1F,0x00,0x00,0xB9,0xE1,0x1F,0x7C,0x1F,0x0F,0x00,0x00,0xBC,0x80,0x0F,0x7F,0x0E,0x0F,0x00,</span><br><span class="line">0x00,0x3C,0x38,0xA0,0xFF,0x00,0x0F,0x00,0x00,0xFF,0xFF,0xBF,0xFF,0x3F,0x06,0x00,0x80,0xFF,0xFF,0xBF,0xFF,0xFF,0x00,0x00,0x80,0xFF,0xFF,0x01,0xF0,0xFF,0x07,0x00,0x80,0xFF,0x1F,0x1C,0xF7,0xFF,0x0F,0x00,0x00,0x3D,0x00,0x3E,0x6F,0xFC,0x1F,0x00,0x00,0x3C,0xFC,0x3F,0x4F,0x40,0x3F,0x00,0x00,0xFC,0xFF,0x3F,</span><br><span class="line">0x5F,0x80,0x3F,0x00,0x00,0xFC,0xFF,0x3F,0x4E,0x80,0x3F,0x00,0x00,0xF8,0xFF,0x1F,0x60,0x80,0x1F,0x00,0x00,0xF0,0xFF,0x07,0x30,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,</span><br><span class="line">0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*C:\Users\NineSun\Desktop\未标题-1.bmp0*/</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const int I2C_ADDR = 0x3c;              // oled屏幕的I2c地址</span><br><span class="line">#define SDA_PIN 12                       // SDA引脚，默认gpio12</span><br><span class="line">#define SCL_PIN 13                      // SCL引脚，默认gpio13</span><br><span class="line"></span><br><span class="line">SSD1306Wire oled(I2C_ADDR, SDA_PIN, SCL_PIN);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void setup()&#123;</span><br><span class="line">  pinMode(MIC, INPUT);      // 麦克风输入口</span><br><span class="line">  pinMode(LED, OUTPUT);     // LED输出口</span><br><span class="line">  pinMode(HC, INPUT);     // 红外输入</span><br><span class="line">  pinMode(D_in, INPUT);     // 光敏输入</span><br><span class="line">  pinMode(2,OUTPUT);</span><br><span class="line"></span><br><span class="line">  Serial.begin(115200);</span><br><span class="line">  </span><br><span class="line">  setup_wifi();</span><br><span class="line">  client.setServer(mqtt_server,1883);</span><br><span class="line">  client.setCallback(callback);</span><br><span class="line"></span><br><span class="line">  oled.init();</span><br><span class="line">  oled.flipScreenVertically();        // 设置屏幕翻转</span><br><span class="line">  oled.setContrast(255);              // 设置屏幕亮度</span><br><span class="line">  drawRect();                         // 测试屏幕显示</span><br><span class="line">  oled.clear(); </span><br><span class="line">  oled.display();       // 清除屏幕</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void loop()&#123;</span><br><span class="line">  if(!client.connected())&#123;</span><br><span class="line">    reconnect();</span><br><span class="line">  &#125;</span><br><span class="line">  client.loop();</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  if(auto_mode)&#123;</span><br><span class="line">    oled.clear();</span><br><span class="line">    Auto_Mode();</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    oled.clear();</span><br><span class="line">    oled.drawFastImage(30, 0, 64, 64, image2);</span><br><span class="line">    oled.display();</span><br><span class="line">    manual_mode();</span><br><span class="line">    delay(200);</span><br><span class="line">  &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Auto_Mode()&#123;</span><br><span class="line">  oled.setFont(ArialMT_Plain_16);       // 设置字体</span><br><span class="line">  oled.println(&quot;AUTO&quot;);</span><br><span class="line">  oled.drawFastImage(4 + 20*1, 21*0, 16, 16, sheng[0]); // 将要显示的文字写入缓存</span><br><span class="line">  oled.drawFastImage(4 + 20*1, 21*1, 16, 16, ren[0]); // 将要显示的文字写入缓存</span><br><span class="line">  oled.drawFastImage(4 + 20*1, 21*2, 16, 16, guang[0]); // 将要显示的文字写入缓存</span><br><span class="line">  oled.drawFastImage(4 + 20*0, 21*0, 16, 16, wu_you[VALOR]); // 将要显示的文字写入缓存</span><br><span class="line">  oled.drawFastImage(4 + 20*0, 21*1, 16, 16, wu_you[HoneWai]); // 将要显示的文字写入缓存</span><br><span class="line">  oled.drawFastImage(4 + 20*0, 21*2, 16, 16, wu_you[!Lighting]); // 将要显示的文字写入缓存</span><br><span class="line">  oled.drawFastImage(45, 0, 64, 64, image1);</span><br><span class="line">  oled.display();                       // 将缓存里的文字在屏幕上显示</span><br><span class="line">  delay(500);</span><br><span class="line">  oled.display();</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  VALOR = digitalRead(MIC);   // 数字读取DO</span><br><span class="line">  HoneWai = digitalRead(HC); </span><br><span class="line">  Lighting =  digitalRead(D_in);</span><br><span class="line">  </span><br><span class="line">  if(Lighting==HIGH)&#123;</span><br><span class="line">    oled.clear();</span><br><span class="line">       if (VALOR == HIGH||HoneWai == HIGH)&#123;</span><br><span class="line">             oled.drawFastImage(4 + 20*1, 21*0, 16, 16, sheng[0]); // 将要显示的文字写入缓存</span><br><span class="line">             oled.drawFastImage(4 + 20*1, 21*1, 16, 16, ren[0]); // 将要显示的文字写入缓存</span><br><span class="line">             oled.drawFastImage(4 + 20*1, 21*2, 16, 16, guang[0]); // 将要显示的文字写入缓存</span><br><span class="line">             oled.drawFastImage(4 + 20*0, 21*0, 16, 16, wu_you[VALOR]); // 将要显示的文字写入缓存</span><br><span class="line">             oled.drawFastImage(4 + 20*0, 21*1, 16, 16, wu_you[HoneWai]); // 将要显示的文字写入缓存</span><br><span class="line">             oled.drawFastImage(4 + 20*0, 21*2, 16, 16, wu_you[!Lighting]); // 将要显示的文字写入缓存</span><br><span class="line"></span><br><span class="line">             oled.drawFastImage(45, 0, 64, 64, image1);</span><br><span class="line">             </span><br><span class="line">             oled.display();                       // 将缓存里的文字在屏幕上显示</span><br><span class="line">             digitalWrite(LED, HIGH);</span><br><span class="line">             delay(5000); </span><br><span class="line">           &#125;</span><br><span class="line">       else&#123;</span><br><span class="line">             digitalWrite(LED, LOW);</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    digitalWrite(LED, LOW);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void manual_mode()&#123;</span><br><span class="line">  digitalWrite(LED, led_mode?HIGH:LOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//开机动画</span><br><span class="line">void drawRect(void) &#123;</span><br><span class="line">  for (int16_t i=0; i&lt;oled.getHeight()/2; i+=2) &#123;</span><br><span class="line">    oled.drawRect(i, i, oled.getWidth()-2*i, oled.getHeight()-2*i);</span><br><span class="line">    oled.display();</span><br><span class="line">    delay(50);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*****************************wifi程序*****************************************************************/</span><br><span class="line">void setup_wifi()&#123;</span><br><span class="line">  Serial.println();</span><br><span class="line">  Serial.print(&quot;Connecting to&quot;);</span><br><span class="line">  Serial.println(wifissid);</span><br><span class="line">  WiFi.begin(wifissid,password);</span><br><span class="line">  while(WiFi.status()!=WL_CONNECTED)&#123;</span><br><span class="line">    delay(500);</span><br><span class="line">    Serial.print(&quot;.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  Serial.println(&quot; &quot;);</span><br><span class="line">  Serial.println(&quot;WiFi connected!&quot;);</span><br><span class="line">  Serial.println(&quot;IP Address:&quot;);</span><br><span class="line">  Serial.println(WiFi.localIP());</span><br><span class="line">&#125;</span><br><span class="line">void callback(char* topic,byte* payload,unsigned int length)&#123;</span><br><span class="line">  String msg=&quot;&quot;;</span><br><span class="line">  String Led_set=&quot;&quot;;</span><br><span class="line">  String auto_set=&quot;&quot;;</span><br><span class="line">  Serial.println(&quot;Message arrived&#123;&quot;);</span><br><span class="line">  Serial.println(topic);</span><br><span class="line">  Serial.println(&quot;&#125;&quot;);</span><br><span class="line">  for (int i=0;i&lt;length;i++)&#123;</span><br><span class="line">    msg+=(char)payload[i];</span><br><span class="line">  &#125;</span><br><span class="line">  Serial.println(msg);</span><br><span class="line">  if(msg.indexOf(&quot;led&quot;))&#123;</span><br><span class="line">    Led_set = msg.substring(msg.indexOf(&quot;led\&quot;:&quot;)+5,msg.indexOf(&quot;&#125;&quot;));</span><br><span class="line">    led_mode = Led_set.toInt();</span><br><span class="line">  &#125;</span><br><span class="line">  if(msg.indexOf(&quot;auto&quot;))&#123;</span><br><span class="line">    auto_set = msg.substring(msg.indexOf(&quot;auto\&quot;:&quot;)+6,msg.indexOf(&quot;&#125;&quot;));</span><br><span class="line">    auto_mode = auto_set.toInt();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">void reconnect()&#123;</span><br><span class="line">  while(!client.connected())&#123;</span><br><span class="line">    Serial.println(&quot;Attempting MQTT connection...&quot;);</span><br><span class="line">    if(client.connect(mqtt_id))&#123;</span><br><span class="line">      Serial.println(&quot;Connected!&quot;);</span><br><span class="line">      client.publish(Mqtt_pub_topic,&quot;设备已上线&quot;);</span><br><span class="line"></span><br><span class="line">      client.subscribe(Mqtt_sub_topic,1);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      Serial.println(&quot;Failed,rc=&quot;);</span><br><span class="line">      Serial.println(client.state());</span><br><span class="line">      Serial.println(&quot;try again in 5 seconds&quot;);</span><br><span class="line">      delay(50000);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">硬件代码并没有很多需要说的，首先开头引入```#include &lt;PubSubClient.h&gt;```库文件，来使用mqtt服务，关于mqtt部分的的代码全都放在了后半段。  </span><br><span class="line">* ```setup_wifi```是wifi的设置，连接wifi。  </span><br><span class="line">* ```callback```函数是一个回调函数，这个回调函数中的形参是固定的，```topic```是订阅的主题，```payload```是主题发送来的信息，```length```是信息的长度。  </span><br><span class="line">* ```reconnect```函数是用来反复尝试连接服务器并订阅主题。  </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">接下来是软件部分的代码，正如我在摘要中所说，整个软件部分是用java语言使用android studio进行开发的，对于不熟悉软件开发的读者，我在这里进行一些简单的介绍，熟悉的读者可以直接跳过这部分：</span><br><span class="line">&gt;在安卓开发中，对于我们这些硬件入门的同志来说，首当其冲的问题是不太明白他的文件结构，使用android studio打开一个安卓项目之后，你会发现有很多文件夹，代码也不只一种，甚至不止一种类型、一种格式！这个对于从c语言开发过来，一个项目最多编写引入一个头文件的硬件爱好者们上来就是一个懵逼。因此先搞清楚这些文件究竟有什么用处就非常有必要，这里我不会一一详解每个文件究竟是干嘛的，我会以同样一个硬件入门软件的学习者的角度阐明我认为重要的几个概念和文件。  </span><br><span class="line">&gt;* 首先要说的是在as里面你可以使工程文件以不同的结构展现在你的面前，这里为了便于理解，直接选择Android即可。   </span><br><span class="line">&gt;* 选择Android视图之后，第一个比较重要的文件![image.png](http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpxf7h1wqj306201tq30.jpg)```MainActivity```文件,这个文件中的代码是我们整个app的“逻辑”代码，通过编写这个文件中的代码来实现我们需要的app功能。  </span><br><span class="line">&gt;* 另一个很重要的文件就是![image.png](http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpxhzipwlj304x019q2v.jpg)```layout```文件夹下的```activity_main.xml```文件了，正如其名，这个文件是app的布局文件，所谓布局文件就是决定你的app“长什么样子”。在这个文件中，我们进行代码编写可以做到在app中增加按钮（button）、图片（view）、文本（text）等等一系列app组件并赋予他们属性，然后我们将在```MainActivity```像变量一样调用他们，通过监听函数一类的操作来使得这些组件实现我们想要的功能。  </span><br><span class="line">&gt;* 除了以上两者之外不得不提的一个文件是![image.png](http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpxpi8w1tj307z020mxk.jpg)```build.gradle```文件，这个文件可以用来导入一些环境依赖，当然，你也可以不通过gradle去导入依赖包而使用离线的方式手动导入也可行的，但是在网络条件没问题的情况下通过在这里面进行导入会很方便。    </span><br><span class="line">&gt;* 最后要说的是一个名叫![image.png](http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpxsih0qlj305q01r3yj.jpg)```AndroidMainfest.xml```文件，在这个文件中我们可以配置我们需要的手机权限，比如在本项目中我们就需要获取手机wifi连接的权限  </span><br><span class="line">&gt;* 除了以上这些文件以外，as中还有很多文件，他们并不是背景板，而是可能会频繁使用的，比如```res```文件夹下的文件则是app的资源文件夹，在这个文件夹下我们需要放上诸如app图标、用到的图片、甚至是颜色和字符串。  </span><br><span class="line"></span><br><span class="line">在以上的简单讲解之后，相信就算你对安卓开发完全0基础，相信再继续往下看下去的话，也不至于一头雾水了，而至于更深层次的理解和理解之后的掌握则是需要读者自己的学习了，安卓开发的前置知识需求还是有的，有一些门槛在，**我这里简单的介绍主要是为了确保读者可以看得懂我接下来要贴的代码究竟是干什么用的。**  </span><br><span class="line">开始贴代码：  </span><br><span class="line">* 正如我上面所说的，我们需要一个依赖包来使用Mqtt的服务，这里我们只需要简单的在```build.gradle```文件中添加一段引入包的语句即可：</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>//导入Mqtt环境依赖<br>    implementation ‘org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.1’<br>    implementation ‘org.eclipse.paho:org.eclipse.paho.android.service:1.1.1’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 然后我们就需要设置app需要的权限，这确保我们的app能正常打开，功能也能正常使用，我们仅需在```AndroidMainfest.xml```文件中添加我们需要获取的权限的语句。  </span><br><span class="line"></span><br></pre></td></tr></table></figure><!-- Permissions the Application Requires --><pre><code>&lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;&lt;!--&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;--&gt;&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;  </code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 然后是布局文件的代码，这段代码决定了我们的app长什么样子,读者在了解一些基本语句之后，可以很容易读懂这段代码就仅仅是增添了几个组件以及他们的布局。</span><br><span class="line"></span><br></pre></td></tr></table></figure><?xml version="1.0" encoding="utf-8"?><p>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=”<a href="http://schemas.android.com/apk/res/android&quot;">http://schemas.android.com/apk/res/android&quot;</a><br>    xmlns:app=”<a href="http://schemas.android.com/apk/res-auto&quot;">http://schemas.android.com/apk/res-auto&quot;</a><br>    xmlns:tools=”<a href="http://schemas.android.com/tools&quot;">http://schemas.android.com/tools&quot;</a><br>    android:layout_width=”match_parent”<br>    android:layout_height=”match_parent”<br>    tools:context=”.MainActivity”&gt;</p><pre><code>&lt;LinearLayout    android:layout_width=&quot;match_parent&quot;    android:layout_height=&quot;match_parent&quot;    android:orientation=&quot;vertical&quot;&gt;    &lt;LinearLayout        android:layout_width=&quot;match_parent&quot;        android:layout_height=&quot;wrap_content&quot;        android:visibility=&quot;visible&quot;&gt;        &lt;ImageView            android:layout_width=&quot;wrap_content&quot;            android:layout_height=&quot;20sp&quot;            android:src=&quot;@drawable/online&quot;            android:alpha=&quot;0&quot;&gt;        &lt;/ImageView&gt;        &lt;TextView            android:layout_width=&quot;wrap_content&quot;            android:layout_height=&quot;wrap_content&quot;            android:text=&quot;&quot;&gt;        &lt;/TextView&gt;    &lt;/LinearLayout&gt;    &lt;ImageButton        android:layout_width=&quot;100dp&quot;        android:layout_height=&quot;100dp&quot;        android:layout_gravity=&quot;center&quot;        android:layout_marginTop=&quot;200dp&quot;        android:id=&quot;@+id/but_1&quot;        android:backgroundTint=&quot;@color/white&quot;        android:src=&quot;@drawable/power&quot;&gt;    &lt;/ImageButton&gt;    &lt;ImageButton        android:layout_width=&quot;100dp&quot;        android:layout_height=&quot;100dp&quot;        android:layout_gravity=&quot;center&quot;        android:id=&quot;@+id/but_2&quot;        android:backgroundTint=&quot;@color/white&quot;        android:src=&quot;@drawable/swt&quot;&gt;    &lt;/ImageButton&gt;&lt;/LinearLayout&gt;</code></pre><p>&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 最后则是我们的“主程序”的代码，这段代码赋予我们添加的组件以具体的功能，从而使app实现我们想要的效果。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>package com.example.mqtt_study;</p><p>import androidx.appcompat.app.AppCompatActivity;</p><p>import android.os.Bundle;<br>import android.view.View;<br>import android.widget.Button;<br>import android.widget.ImageButton;<br>import android.widget.ImageView;<br>import android.widget.LinearLayout;<br>import android.widget.TextView;<br>import android.widget.Toast;<br>import android.widget.Switch;</p><p>import org.eclipse.paho.android.service.MqttAndroidClient;<br>import org.eclipse.paho.client.mqttv3.IMqttActionListener;<br>import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;<br>import org.eclipse.paho.client.mqttv3.IMqttMessageListener;<br>import org.eclipse.paho.client.mqttv3.IMqttToken;<br>import org.eclipse.paho.client.mqttv3.MqttCallbackExtended;<br>import org.eclipse.paho.client.mqttv3.MqttConnectOptions;<br>import org.eclipse.paho.client.mqttv3.MqttException;<br>import org.eclipse.paho.client.mqttv3.MqttMessage;</p><p>public class MainActivity extends AppCompatActivity {</p><pre><code>MqttAndroidClient mqttAndroidClient;//建立Client客户端实例final String serverUri = &quot;tcp://101.43.207.139:1883&quot;;//服务器地址String clientId = &quot;isNineSun_android&quot;;//客户端标识，可以随便起，保证不重复即可final String subscriptionTopic = &quot;sub_ywt&quot;;//订阅的主题final String publishTopic = &quot;pub_ywt&quot;;//UI变量private ImageButton button1,button2;private boolean light,auto;private TextView text;private ImageView image;@Overrideprotected void onCreate(Bundle savedInstanceState) &#123;    super.onCreate(savedInstanceState);    setContentView(R.layout.activity_main);    UI_init();    Mqtt_init();    button1.setOnClickListener(new View.OnClickListener() &#123;        @Override        public void onClick(View view) &#123;            light=!light;            String publishMsg=&quot;&#123;\&quot;set_led\&quot;:&quot;+(light?&quot;1&quot;:&quot;0&quot;)+&quot;&#125;&quot;;            publishMessage(publishMsg);        &#125;    &#125;);    button2.setOnClickListener(new View.OnClickListener() &#123;        @Override        public void onClick(View view) &#123;            auto=!auto;            String publishMsg=&quot;&#123;\&quot;set_auto\&quot;:&quot;+(auto?&quot;1&quot;:&quot;0&quot;)+&quot;&#125;&quot;;            publishMessage(publishMsg);        &#125;    &#125;);&#125;void UI_init()&#123;    button1 = findViewById(R.id.but_1);    button2 = findViewById(R.id.but_2);&#125;public void Mqtt_init()&#123;    //新建Client实例    //clientId = clientId + System.currentTimeMillis();//在clientId即客户端标识后面加上时间戳来保证唯一性    mqttAndroidClient = new MqttAndroidClient(getApplicationContext(), serverUri, clientId);    //新建回调函数    mqttAndroidClient.setCallback(new MqttCallbackExtended() &#123;        @Override        //连接完成        public void connectComplete(boolean reconnect, String serverURI) &#123;        &#125;        //失去连接        @Override        public void connectionLost(Throwable cause) &#123;        &#125;        //信息送达        @Override        public void messageArrived(String topic, MqttMessage message) throws Exception &#123;            String msg = new String(message.getPayload());            //String T_val=msg.substring(msg.indexOf(&quot;&#123;temperature:&quot;),msg.indexOf(&quot;&#125;&quot;));            makeToast(msg);            text.setText(msg);            image.setImageAlpha(1);        &#125;        //推送完成        @Override        public void deliveryComplete(IMqttDeliveryToken token) &#123;        &#125;    &#125;);    //连接设置、是否自动重连、是否清理Session    MqttConnectOptions mqttConnectOptions = new MqttConnectOptions();    mqttConnectOptions.setAutomaticReconnect(true);    mqttConnectOptions.setCleanSession(false);    //正式开始建立连接    try &#123;        //addToHistory(&quot;Connecting to &quot; + serverUri);        mqttAndroidClient.connect(mqttConnectOptions, null, new IMqttActionListener() &#123;            @Override            public void onSuccess(IMqttToken asyncActionToken) &#123;                makeToast(&quot;连接成功&quot;);                subscribeToTopic();            &#125;            @Override            public void onFailure(IMqttToken asyncActionToken, Throwable exception) &#123;                makeToast(&quot;连接失败&quot;);            &#125;        &#125;);    &#125; catch (MqttException ex)&#123;        ex.printStackTrace();    &#125;&#125;public void subscribeToTopic()&#123;    try &#123;        //开始订阅        mqttAndroidClient.subscribe(subscriptionTopic, 0, null, new IMqttActionListener() &#123;            @Override            public void onSuccess(IMqttToken asyncActionToken) &#123;                makeToast(&quot;成功订阅&quot;+subscriptionTopic);            &#125;            @Override            public void onFailure(IMqttToken asyncActionToken, Throwable exception) &#123;                makeToast(&quot;未能订阅&quot;+subscriptionTopic);            &#125;        &#125;);    &#125; catch (MqttException ex)&#123;        ex.printStackTrace();    &#125;&#125;public void publishMessage(String publishMessage)&#123;    try &#123;        MqttMessage message = new MqttMessage();        message.setPayload(publishMessage.getBytes());        mqttAndroidClient.publish(publishTopic, message);        if(!mqttAndroidClient.isConnected())&#123;        &#125;    &#125; catch (MqttException e) &#123;        System.err.println(&quot;Error Publishing: &quot; + e.getMessage());        e.printStackTrace();    &#125;&#125;private void makeToast(String str)&#123;    Toast.makeText(MainActivity.this,str,Toast.LENGTH_SHORT).show();&#125;</code></pre><p>}</p><p>```  </p><p>想必读者一定发现了我的主程序代码中有很多只写了注释的“空函数”，这些函数并不是笔者喝多了，而是笔者自己整理的模板，这套Mqtt模板可以使得笔者在进行其他基于Mqtt项目时不用重复造轮子，这个模板是基于官网例程所改的，读者如果需要的话可以到我的github去拿–&gt;<a href="https://github.com/isNineSun/Mqtt_Demo">Mqtt服务模板</a>，同时我也有意向整理一个完整的Mqtt服务模板，从硬件到软件，以便需要时直接进行套用，节省时间，如果整理好了会直接发在这个博客里。<br><strong>最后不得不提的是我买的服务器是腾讯云的服务器，刚好有学生优惠，买了一年，至于mqtt服务接管的平台则是EMQ平台，也算是做mqtt物联网中响当当的平台了。Mqtt服务本身就有不少可玩的东西，感兴趣的同学可以去深入了解一下</strong></p><hr><h2 id="五、实物展示"><a href="#五、实物展示" class="headerlink" title="五、实物展示"></a>五、实物展示</h2><p><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpym6xwajj31vo0v8dmw.jpg" alt="硬件实物图.png"><br>3D打印机看来迫在眉睫，实在不想被迫搞手工弄外壳了……(╯°□°）╯︵ ┻━┻<br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gzpyoofo1zj30nw1hct99.jpg" alt="软件app实物图.jpg">  </p><hr><h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><p>这次项目的设计总体收获很大，不仅是Mqtt的理解和掌握，还学习了安卓开发，希望以后能输出更多更好的内容。<br>☆*: .｡. o(≧▽≦)o .｡.:*☆</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;这是一个城市智能路灯系统的设计，设计硬件部分本身并不复杂，实现的基本功能就是自动模式下判断环境情况（有无人/有无光/有无声音）然后开启/关闭照明的一个设计。因此本次设计的重心在于Mqtt的协议的学习和使用。看过笔者前几篇博客的应该明白，笔者之前的几个物联网设计更多的是倾向于第三方的开源平台（如：点灯科技）。用第三方开源平台来做物联网项目并无不可，&lt;strong&gt;但对于一个电子爱好者也好，或者说一个极客来说，总是依赖第三方终归是差了点儿意思，简单的安卓开发也是物联网中不可或缺的一环，因此诞生了这么一个项目。&lt;/strong&gt; 笔者之前学习过一些java，但Android Studio接触是第一次，因此这个项目也是一次对as开发的学习。&lt;/p&gt;</summary>
    
    
    
    <category term="Mqtt" scheme="http://yoursite.com/categories/Mqtt/"/>
    
    <category term="IT" scheme="http://yoursite.com/categories/Mqtt/IT/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/categories/Mqtt/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    
    <category term="单片机设计" scheme="http://yoursite.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
    <category term="Mqtt" scheme="http://yoursite.com/tags/Mqtt/"/>
    
  </entry>
  
  <entry>
    <title>基于esp8266的智能出纸器</title>
    <link href="http://yoursite.com/2022/01/27/PaperManager/"/>
    <id>http://yoursite.com/2022/01/27/PaperManager/</id>
    <published>2022-01-27T09:58:04.000Z</published>
    <updated>2022-01-27T11:25:51.018Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>一个简单的出纸系统，esp8266的小实验，主要是深入了解下360舵机的原理，并尝试应用在了项目上，最重要的还是对点灯科技的加深了解，属实是懒人福音了。</p><span id="more"></span><h2 id="一、原件清单"><a href="#一、原件清单" class="headerlink" title="一、原件清单"></a>一、原件清单</h2><ul><li>NodeMCU*1</li><li>YL声音传感器*1</li><li>mg90伺服电机*1</li><li>led灯珠*1</li><li>杜邦线 若干  </li></ul><h2 id="二、原件连接"><a href="#二、原件连接" class="headerlink" title="二、原件连接"></a>二、原件连接</h2><p><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gysfx1qxhvj30lj0f8q8r.jpg" alt="连线图.png"><br>连线图  </p><table><thead><tr><th>NodeMCU</th><th>YL声音传感器</th><th>sg90伺服电机</th><th>led灯珠</th></tr></thead><tbody><tr><td>D4</td><td></td><td>I/O</td><td></td></tr><tr><td>D5</td><td>DO</td><td></td><td></td></tr><tr><td>D6</td><td></td><td></td><td>+正极</td></tr><tr><td>VCC</td><td>VCC</td><td>VCC</td><td></td></tr><tr><td>GND</td><td>GND</td><td>GND</td><td>-负极</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><hr><h2 id="三、原理图与流程图"><a href="#三、原理图与流程图" class="headerlink" title="三、原理图与流程图"></a>三、原理图与流程图</h2><p><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gysfyvrd4lj30e30eowf5.jpg" alt="流程图.png"><br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gysfyvrzeej30p00ei0vq.jpg" alt="原理图.png">  </p><h2 id="四、代码"><a href="#四、代码" class="headerlink" title="四、代码"></a>四、代码</h2><p>小儿，上代码！</p><pre><code>#define BLINKER_WIFI#include &lt;Blinker.h&gt;#include &lt;Servo.h&gt;  Servo myservo; int pos = 0; int paper = 100;char auth[] = &quot;5c424f59ace0&quot;;char ssid[] = &quot;皇室家族Family&quot;;char pswd[] = &quot;sunlisunrusunxu@&quot;;// 新建组件对象BlinkerButton Button1(&quot;btn-uoz&quot;);BlinkerNumber Number1(&quot;num-89w&quot;);BlinkerSlider Slider1(&quot;ran-8qf&quot;);int counter = 0;int MIC = D5;        // D0 麦克风引脚连接开发板数字接口 2int LED = D6;        // LED  正极连接开发板数字接口3int VALOR;        // DO变量值int LEDDO;       // LED变量 void button1_callback(const String &amp; state)&#123;     myservo.attach(2);     myservo.write(10);                  delay(2000);       myservo.detach();     Serial.println(&quot;已出纸&quot;);      paper-=1;&#125;void slider_callback(int32_t value)&#123;  paper = value;&#125;void Mic_check()&#123;    Number1.print(paper);      digitalWrite(LED, LOW);          VALOR = digitalRead(MIC);   // 数字读取DO    if (VALOR == HIGH)    &#123;      digitalWrite(LED, HIGH);       delay(5000);          &#125; &#125;void setup()&#123;    // 初始化串口    Serial.begin(115200);    BLINKER_DEBUG.stream(Serial);    BLINKER_DEBUG.debugAll();    myservo.attach(2);     myservo.write(90);                  delay(15);     pinMode(MIC, INPUT);      // 麦克风输入口    pinMode(LED, OUTPUT);     // LED输出口       // 初始化blinker    Blinker.begin(auth, ssid, pswd);    Button1.attach(button1_callback);    Slider1.attach(slider_callback);&#125;void loop() &#123;    Blinker.run();    Mic_check();&#125;</code></pre><hr><h2 id="五、成品展示"><a href="#五、成品展示" class="headerlink" title="五、成品展示"></a>五、成品展示</h2><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gysgbx2pnfj30tu1hcn25.jpg" alt="智能出纸器.jpg">  </p><p>喜大普奔！铁直男终于懂得做个外壳了！</p><h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><p>本次设计并不是一个很复杂的设计，可以说算是闲暇之时练个手吧，不过也算有些收获，比如声音传感器虽说运用起来很简单，也与其他传感器原理大同小异，但实际上我确实是第一次使用这个传感器，因此也算是增长了一些见识，希望下次项目能想起来把它加进去。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;一个简单的出纸系统，esp8266的小实验，主要是深入了解下360舵机的原理，并尝试应用在了项目上，最重要的还是对点灯科技的加深了解，属实是懒人福音了。&lt;/p&gt;</summary>
    
    
    
    <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    
    <category term="单片机设计" scheme="http://yoursite.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
  </entry>
  
  <entry>
    <title>基于ESP8266的农业气象监测站</title>
    <link href="http://yoursite.com/2022/01/23/AgricultureMonitor/"/>
    <id>http://yoursite.com/2022/01/23/AgricultureMonitor/</id>
    <published>2022-01-23T11:01:04.000Z</published>
    <updated>2022-01-23T11:06:56.189Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>经过一段时间对esp8266的了解和学习，尝试着做了一个esp8266的项目，是一个农业气象监测站，可以实时采集观测地的温湿度风速压强并显示在oled屏幕上，然后<strong>通过网络将数据传回用户<code>手机APP</code>，做到实时监测。</strong></p><span id="more"></span><h2 id="一、原件清单"><a href="#一、原件清单" class="headerlink" title="一、原件清单"></a>一、原件清单</h2><ul><li>esp8266 node-mcu*1  </li><li>ssd1302 oled显示屏*1</li><li>dht11温湿度传感器*1</li><li>bmp280气压传感器*1</li><li>风速传感器（淘宝店铺：<a href="ilovemcu.taobao.com/">风速传感器的店铺</a>)  </li><li>2pin接线端子*1</li><li>杜邦线 若干  </li></ul><hr><h2 id="二、硬件连接"><a href="#二、硬件连接" class="headerlink" title="二、硬件连接"></a>二、硬件连接</h2><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gynqmp1852j310x0k4qgr.jpg" alt="连线图.png"><br>连线图  </p><table><thead><tr><th>NodeMCU</th><th>ssd1306</th><th>dht11</th><th>BMP280</th><th>风速传感器</th></tr></thead><tbody><tr><td>D0</td><td></td><td></td><td>SCL</td><td></td></tr><tr><td>D1</td><td>SCL</td><td></td><td></td><td></td></tr><tr><td>D2</td><td>SDA</td><td></td><td></td><td></td></tr><tr><td>D3</td><td></td><td></td><td></td><td></td></tr><tr><td>D4</td><td></td><td>S</td><td></td><td></td></tr><tr><td>D5</td><td></td><td></td><td>SDO</td><td></td></tr><tr><td>D6</td><td></td><td></td><td>CSB</td><td></td></tr><tr><td>D7</td><td></td><td></td><td>SDA</td><td></td></tr><tr><td>A0</td><td></td><td></td><td></td><td>棕色信号线</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td><strong>PS：各个模块的VCC和GNG端口皆并联在由NodeMCU引出的3v3和gnd上，风速传感器的蓝色线为gnd线，连接在NodeMCU的GND端口上</strong></td><td></td><td></td><td></td><td></td></tr></tbody></table><hr><h2 id="三、原理框图"><a href="#三、原理框图" class="headerlink" title="三、原理框图"></a>三、原理框图</h2><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gynsdcctwnj30lf0bp0ti.jpg" alt="农业气象监测站原理图.png">  </p><p>通过wifi的方式来将数据传回手机。</p><hr><h2 id="四、程序代码"><a href="#四、程序代码" class="headerlink" title="四、程序代码"></a>四、程序代码</h2><p>废话少说直接上代码  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;Wire.h&gt;</span><br><span class="line">#include &lt;SPI.h&gt;</span><br><span class="line">#include &lt;Adafruit_Sensor.h&gt;</span><br><span class="line">#include &lt;Adafruit_BMP280.h&gt;</span><br><span class="line">#include &lt;dht11.h&gt;//引入DHT11库</span><br><span class="line">#include &quot;SSD1306Wire.h&quot;</span><br><span class="line">#define BLINKER_WIFI</span><br><span class="line">#include &lt;Blinker.h&gt;</span><br><span class="line"></span><br><span class="line">#define temNumber &quot;num-gpc&quot;</span><br><span class="line">#define humNumber &quot;num-ia5&quot;</span><br><span class="line">#define windNumber &quot;num-zb4&quot;</span><br><span class="line">#define AirNumber &quot;num-3zw&quot;</span><br><span class="line"></span><br><span class="line">char auth[] = &quot;c2b25ef0c332&quot;;</span><br><span class="line">char ssid[] = &quot;皇室家族Family&quot;;</span><br><span class="line">char pswd[] = &quot;sunlisunrusunxu@&quot;;</span><br><span class="line"></span><br><span class="line">BlinkerNumber Tem(temNumber);</span><br><span class="line">BlinkerNumber Hum(humNumber);</span><br><span class="line">BlinkerNumber Wind(windNumber);</span><br><span class="line">BlinkerNumber Air(AirNumber);</span><br><span class="line"></span><br><span class="line">dht11 DHT11;//定义传感器类型</span><br><span class="line">#define DHT11PIN 2//定义传感器连接引脚。此处的PIN2在NodeMcu8266开发板上对应的引脚是D4</span><br><span class="line">const int I2C_ADDR = 0x3c;              // oled屏幕的I2c地址</span><br><span class="line">#define SDA_PIN 4                       // SDA引脚，默认gpio4(D2)</span><br><span class="line">#define SCL_PIN 5                       // SCL引脚，默认gpio5(D1)</span><br><span class="line"></span><br><span class="line">#define BMP_SCK 16</span><br><span class="line">#define BMP_MISO 14</span><br><span class="line">#define BMP_MOSI 13 </span><br><span class="line">#define BMP_CS 12                      //气压传感器引脚定义</span><br><span class="line"></span><br><span class="line">SSD1306Wire oled(I2C_ADDR, SDA_PIN, SCL_PIN);</span><br><span class="line">Adafruit_BMP280 bmp(BMP_CS, BMP_MOSI, BMP_MISO,  BMP_SCK);</span><br><span class="line">String number[]=&#123;&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;&#125;;</span><br><span class="line">static const uint8_t text[][32]=&#123;</span><br><span class="line">0x10,0x04,0x60,0x04,0x02,0x7E,0x8C,0x01,0x00,0x40,0x00,0x7E,0xFE,0x42,0x92,0x42,0x92,0x7E,0x92,0x42,0x92,0x7E,0x92,0x42,0xFE,0x42,0x00,0x7E,0x00,0x40,0x00,0x00,/*&quot;温&quot;,0*/</span><br><span class="line">0x00,0x40,0x00,0x30,0xFC,0x8F,0x24,0x80,0x24,0x84,0x24,0x4C,0xFC,0x55,0x25,0x25,0x26,0x25,0x24,0x25,0xFC,0x55,0x24,0x4C,0x24,0x80,0x24,0x80,0x04,0x80,0x00,0x00,/*&quot;度&quot;,1*/</span><br><span class="line">0x10,0x04,0x60,0x04,0x02,0x7E,0x8C,0x01,0x00,0x44,0xFE,0x48,0x92,0x50,0x92,0x7F,0x92,0x40,0x92,0x40,0x92,0x7F,0x92,0x50,0xFE,0x48,0x00,0x44,0x00,0x40,0x00,0x00,/*&quot;湿&quot;,2*/</span><br><span class="line">0x00,0x40,0x00,0x30,0xFC,0x8F,0x24,0x80,0x24,0x84,0x24,0x4C,0xFC,0x55,0x25,0x25,0x26,0x25,0x24,0x25,0xFC,0x55,0x24,0x4C,0x24,0x80,0x24,0x80,0x04,0x80,0x00,0x00,/*&quot;度&quot;,3*/</span><br><span class="line">0x00,0x80,0x00,0x60,0xFE,0x1F,0x02,0x00,0x12,0x20,0x22,0x10,0xC2,0x0C,0x02,0x03,0xC2,0x0C,0x32,0x30,0x02,0x00,0xFE,0x0F,0x00,0x30,0x00,0x40,0x00,0xF8,0x00,0x00,/*&quot;风&quot;,4*/</span><br><span class="line">0x40,0x00,0x40,0x40,0x42,0x20,0xCC,0x1F,0x00,0x20,0x04,0x48,0xF4,0x44,0x94,0x42,0x94,0x41,0xFF,0x5F,0x94,0x41,0x94,0x42,0xF4,0x44,0x04,0x48,0x00,0x40,0x00,0x00,/*&quot;速&quot;,5*/</span><br><span class="line">0x20,0x00,0x10,0x00,0x4C,0x00,0x47,0x00,0x54,0x00,0x54,0x00,0x54,0x00,0x54,0x00,0x54,0x00,0x54,0x00,0x54,0x00,0xD4,0x0F,0x04,0x30,0x04,0x40,0x00,0xF0,0x00,0x00,/*&quot;气&quot;,6*/</span><br><span class="line">0x00,0x80,0x00,0x60,0xFE,0x1F,0x02,0x40,0x82,0x40,0x82,0x40,0x82,0x40,0x82,0x40,0xFA,0x7F,0x82,0x40,0x82,0x40,0x82,0x44,0x82,0x58,0x82,0x40,0x02,0x40,0x00,0x00,/*&quot;压&quot;,7*/</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">float wind=0.0;</span><br><span class="line">float wind_value=0.0;</span><br><span class="line"></span><br><span class="line">void setup()</span><br><span class="line">&#123;</span><br><span class="line">  Serial.begin(9600);//设置波特率为115200</span><br><span class="line"></span><br><span class="line">  Blinker.begin(auth, ssid, pswd);  </span><br><span class="line"></span><br><span class="line">  oled.init();                        //初始化</span><br><span class="line">  oled.flipScreenVertically();        // 设置屏幕翻转</span><br><span class="line">  oled.setContrast(255);              // 设置屏幕亮度</span><br><span class="line">  drawRect();                         // 测试屏幕显示</span><br><span class="line">  oled.clear(); oled.display();       // 清除屏幕</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/********************###主函数###********************/</span><br><span class="line">void loop()</span><br><span class="line">&#123;</span><br><span class="line">  Blinker.run();</span><br><span class="line">  bmp.begin();</span><br><span class="line">  Serial.println(&quot;\n&quot;);</span><br><span class="line">  DHT11.read(DHT11PIN); //更新传感器所有信息</span><br><span class="line">  delay(500);//每0.5秒打印一次</span><br><span class="line"></span><br><span class="line">  int sensorValue = analogRead(A0);</span><br><span class="line">  float wind = sensorValue * (5.0 / 1024.0); </span><br><span class="line">  wind_value=100*wind-4.39;</span><br><span class="line">  </span><br><span class="line">  oled.setFont(ArialMT_Plain_16);     // 设置字体</span><br><span class="line">  oled.clear();</span><br><span class="line">  oled.drawFastImage(4 + 16*0, 0, 16, 16, text[0]);</span><br><span class="line">  oled.drawFastImage(4 + 16*1, 0, 16, 16, text[1]);</span><br><span class="line">  oled.drawFastImage(18 + 16*3, 0, 16, 16, text[2]);</span><br><span class="line">  oled.drawFastImage(18 + 16*4, 0, 16, 16, text[3]);</span><br><span class="line">  oled.drawFastImage(4 + 16*0, 19, 16, 16, text[4]);</span><br><span class="line">  oled.drawFastImage(4 + 16*1, 19, 16, 16, text[5]);</span><br><span class="line">  oled.drawFastImage(4 + 16*0, 19*2, 16, 16, text[6]);</span><br><span class="line">  oled.drawFastImage(4 + 16*1, 19*2, 16, 16, text[7]);</span><br><span class="line">  oled.drawString(4 + 16*2, 0, &quot;:&quot;+number[DHT11.temperature/10]+number[DHT11.temperature%10]);</span><br><span class="line">  oled.drawString(18 + 16*5, 0, &quot;:&quot;+number[DHT11.humidity/10]+number[DHT11.humidity%10]);</span><br><span class="line">  oled.drawString(4 + 16*2, 19, &quot;:&quot;+number[(int)wind_value/100]+number[(int)wind_value/10%10]+number[(int)wind_value%10]+&quot;.&quot;+number[((int)(wind_value*100))/10%10]+number[((int)(wind_value*100))%10]+&quot;km/h&quot;);</span><br><span class="line">  pressuCheck();</span><br><span class="line">  oled.display(); </span><br><span class="line"> </span><br><span class="line">  Tem.print(DHT11.temperature); </span><br><span class="line">  Hum.print(DHT11.humidity);  </span><br><span class="line">  Wind.print(wind_value);           </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">void drawRect(void) &#123;</span><br><span class="line">  for (int16_t i=0; i&lt;oled.getHeight()/2; i+=2) &#123;</span><br><span class="line">    oled.drawRect(i, i, oled.getWidth()-2*i, oled.getHeight()-2*i);</span><br><span class="line">    oled.display();</span><br><span class="line">    delay(50);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">void pressuCheck()</span><br><span class="line">&#123;</span><br><span class="line">float Pressure=0.0;</span><br><span class="line">int Pressure1,Pressure2,Pressure3,Pressure4,Pressure5,Pressure6,Pressure7,Pressure8;</span><br><span class="line">Pressure=bmp.readPressure();</span><br><span class="line"></span><br><span class="line">  //由于气压的位数比较多，因此单独储存便于分类</span><br><span class="line">  Pressure1=(int)Pressure/100000;</span><br><span class="line">  Pressure2=(int)Pressure/10000%10;</span><br><span class="line">  Pressure3=(int)Pressure/1000%10;</span><br><span class="line">  Pressure4=(int)Pressure/100%10;</span><br><span class="line">  Pressure5=(int)Pressure/10%10;</span><br><span class="line">  Pressure6=(int)Pressure%10;</span><br><span class="line">  Pressure7=((int)(Pressure*100))/10%10;</span><br><span class="line">  Pressure8=((int)(Pressure*100))%10;</span><br><span class="line">  oled.drawString(4 + 16*2, 19*2, &quot;:&quot;+number[Pressure1]+number[Pressure2]+number[Pressure3]+number[Pressure4]+number[Pressure5]+number[Pressure6]+&quot;.&quot;+number[Pressure7]+number[Pressure8]+&quot;P&quot;);</span><br><span class="line">    </span><br><span class="line">  Air.print(Pressure);     </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><strong>注意事项：</strong></p><ul><li>代码中的中文汉字用到了一个叫  <img src="http://tva1.sinaimg.cn/large/008ruEzYly1gynsgushuej300l00lgld.jpg" alt="image.png"><code>PCtoLCD2002</code>  的软件,这个软件可以很方便的将汉字转化成对应的字形码来输出，这里用的是16*16的字宽字长。</li><li>在文章末尾的名叫<code>pressuCheck()</code>的子函数，之所以把这段单独写出来而不是写在<code>loop</code>函数里面去处理，不是因为笔者的代码习惯，而是必须这样不可。因为ESP8266芯片的内存有限，笔者一开始非常畅快的在<code>loop</code>函数中大写特写，结果虽然编译没有问题，但是上传到单片机上的时候，设备一直死机重启，害的笔者一开始还以为焊接的时候动到单片机的Rst引脚了，最后才反应过来是内存溢出的问题，把全局变量改为了局部变量之后，内存溢出问题得以解决。  </li><li>老生常谈，NodeMCU只支持3.3V电压，过高的电压可能会损坏芯片。</li><li>连接手机的app使用的是电灯科技的接口，一方面租用服务器很贵，对于这种学习性质的设计来说有些划不来，另一方面则是考虑到开发时间的问题，如果转向Android开发则会使得开发的重心偏移，关于Android我有计划在以后的博客中编写</li><li>最后，esp8266这块芯片真的很好用，使用Arduino的库真的省去了大量的重复造轮子的时间，如果转而用51<br>系列单片机开发代码量起码是这个的五倍。不过如果是用来学习嵌入式，我想51还是更好的选择，因为他更能让人深刻的理解嵌入开发。</li></ul><hr><h2 id="五、实物图"><a href="#五、实物图" class="headerlink" title="五、实物图"></a>五、实物图</h2><p><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gynt3cnjfrj31hc0tu79g.jpg" alt="实物图1.jpg"><br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gynt3cnpaij31hc0tujxc.jpg" alt="实物图2.jpg"><br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gynt3colxaj31hc0tu0z5.jpg" alt="实物图3.jpg"></p><h2 id="六、结束"><a href="#六、结束" class="headerlink" title="六、结束"></a>六、结束</h2><p>这次的设计总的来说是数据的采集和发送，逻辑上并不困难，学习各个传感器的引脚定义可能花费了一点时间，但也并不属于很复杂的项目，今后有机会想做一些更有挑战性的东西。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;经过一段时间对esp8266的了解和学习，尝试着做了一个esp8266的项目，是一个农业气象监测站，可以实时采集观测地的温湿度风速压强并显示在oled屏幕上，然后&lt;strong&gt;通过网络将数据传回用户&lt;code&gt;手机APP&lt;/code&gt;，做到实时监测。&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="esp8266" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/esp8266/"/>
    
    
    <category term="esp8266" scheme="http://yoursite.com/tags/esp8266/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
  </entry>
  
  <entry>
    <title>ESP8266的wifi连接模板代码</title>
    <link href="http://yoursite.com/2022/01/15/ESP8266_template/"/>
    <id>http://yoursite.com/2022/01/15/ESP8266_template/</id>
    <published>2022-01-15T04:56:04.000Z</published>
    <updated>2022-01-17T13:42:29.778Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>这是一个ESP8266连接wifi的模板，几乎连接wifi都会用到这个代码，因此在这里做个记录。</p><span id="more"></span><h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ESP8266WiFi.h&gt;        </span><br><span class="line"> </span><br><span class="line">const char* ssid=&quot;WiFi名称&quot;;      </span><br><span class="line">const char* password=&quot;WiFi密码&quot;;         </span><br><span class="line">                                            </span><br><span class="line">void setup() &#123;</span><br><span class="line">  Serial.begin(9600);          // 启动串口通讯</span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line">  int i = 0;                                 </span><br><span class="line">  WiFi.begin(ssid,password);</span><br><span class="line">    while(WiFi.status()!= WL_CONNECTED)</span><br><span class="line">    &#123;</span><br><span class="line">        delay(500);</span><br><span class="line">        Serial.print(&quot;.&quot;);</span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">  // WiFi连接成功后将通过串口监视器输出连接成功信息 </span><br><span class="line">  Serial.println(&#x27;\n&#x27;);                     // WiFi连接成功后</span><br><span class="line">  Serial.print(&quot;Connected to &quot;);            // NodeMCU将通过串口监视器输出。</span><br><span class="line">  Serial.println(WiFi.SSID());              // 连接的WiFI名称</span><br><span class="line">  Serial.print(&quot;IP address:\t&quot;);            // 以及</span><br><span class="line">  Serial.println(WiFi.localIP());           // NodeMCU的IP地址</span><br><span class="line">  &#125;  </span><br><span class="line"> </span><br><span class="line">void loop() &#123;                                   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;这是一个ESP8266连接wifi的模板，几乎连接wifi都会用到这个代码，因此在这里做个记录。&lt;/p&gt;</summary>
    
    
    
    <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="ESP8266" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/ESP8266/"/>
    
    
    <category term="单片机设计" scheme="http://yoursite.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
    <category term="ESP8266" scheme="http://yoursite.com/tags/ESP8266/"/>
    
  </entry>
  
  <entry>
    <title>基于Arduino的智能避障小车的设计</title>
    <link href="http://yoursite.com/2022/01/14/BiZhangChe/"/>
    <id>http://yoursite.com/2022/01/14/BiZhangChe/</id>
    <published>2022-01-13T16:00:09.000Z</published>
    <updated>2022-01-13T17:07:42.258Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>这是一个小巧简单的避障车的设计，也算是Arduino中比较火的项目了，试着学习了一下，通过项目来更深入的理解和应用Arduino。</p><span id="more"></span><hr><h2 id="一、原件清单"><a href="#一、原件清单" class="headerlink" title="一、原件清单"></a>一、原件清单</h2><ul><li>Arduino Uno开发板</li><li>L293D </li><li>轮子 (4x)</li><li>直流电机 (4x) </li><li>伺服电机sg90 </li><li>超声波传感器 </li><li>18650 锂电池 (2x) </li><li>18650 插针式电池盒子</li><li>跳线</li><li>亚克力板</li><li>三脚拨动开关   </li></ul><hr><h2 id="二、硬件连接"><a href="#二、硬件连接" class="headerlink" title="二、硬件连接"></a>二、硬件连接</h2><ol><li><p>L293D直流电机驱动模块与Arduino兼容，模块的0~13、gnd、以及ARef引脚直接连接对应Arduino的引脚，另一侧同样对应连接。  </p></li><li><p>图中标记为L293D的四个H桥，可分别连接四个直流电机。<br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gycixlm8n3j30ep0gfdog.jpg" alt="L293D">  </p></li><li><p>超声波传感器的Vcc连接L293D的+5v，Gnd连接L293D的Gnd，Trig连A0，Echo连接A1。  </p></li><li><p>伺服电机直接连接L293D板子的伺服电机端口。   </p></li><li><p>两节18650锂电池串联接入L293D的外部供电。  </p></li></ol><h2 id="三、程序代码"><a href="#三、程序代码" class="headerlink" title="三、程序代码"></a>三、程序代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;AFMotor.h&gt;  </span><br><span class="line">#include &lt;NewPing.h&gt;</span><br><span class="line">#include &lt;Servo.h&gt; </span><br><span class="line"></span><br><span class="line">#define TRIG_PIN A0 </span><br><span class="line">#define ECHO_PIN A1 </span><br><span class="line">#define MAX_DISTANCE 200 </span><br><span class="line">#define MAX_SPEED 190 // sets speed of DC  motors</span><br><span class="line">#define MAX_SPEED_OFFSET 20</span><br><span class="line"></span><br><span class="line">NewPing sonar(TRIG_PIN, ECHO_PIN, MAX_DISTANCE); </span><br><span class="line"></span><br><span class="line">AF_DCMotor motor1(1, MOTOR12_1KHZ); </span><br><span class="line">AF_DCMotor motor2(2, MOTOR12_1KHZ);</span><br><span class="line">AF_DCMotor motor3(3, MOTOR34_1KHZ);</span><br><span class="line">AF_DCMotor motor4(4, MOTOR34_1KHZ);</span><br><span class="line">Servo myservo;   </span><br><span class="line"></span><br><span class="line">boolean goesForward=false;</span><br><span class="line">int distance = 100;</span><br><span class="line">int speedSet = 0;</span><br><span class="line"></span><br><span class="line">void setup() &#123;</span><br><span class="line"></span><br><span class="line">  myservo.attach(10);  </span><br><span class="line">  myservo.write(180); </span><br><span class="line">  delay(2000);</span><br><span class="line">  distance = readPing();</span><br><span class="line">  delay(100);</span><br><span class="line">  distance = readPing();</span><br><span class="line">  delay(100);</span><br><span class="line">  distance = readPing();</span><br><span class="line">  delay(100);</span><br><span class="line">  distance = readPing();</span><br><span class="line">  delay(100);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void loop() &#123;</span><br><span class="line"> int distanceR = 0;</span><br><span class="line"> int distanceL =  0;</span><br><span class="line"> delay(40);</span><br><span class="line"> </span><br><span class="line"> if(distance&lt;=15)</span><br><span class="line"> &#123;</span><br><span class="line">  moveStop();</span><br><span class="line">  delay(100);</span><br><span class="line">  moveBackward();</span><br><span class="line">  delay(300);</span><br><span class="line">  moveStop();</span><br><span class="line">  delay(200);</span><br><span class="line">  distanceR = lookRight();</span><br><span class="line">  delay(200);</span><br><span class="line">  distanceL = lookLeft();</span><br><span class="line">  delay(200);</span><br><span class="line"></span><br><span class="line">  if(distanceR&gt;=distanceL)</span><br><span class="line">  &#123;</span><br><span class="line">    turnRight();</span><br><span class="line">    moveStop();</span><br><span class="line">  &#125;else</span><br><span class="line">  &#123;</span><br><span class="line">    turnLeft();</span><br><span class="line">    moveStop();</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;else</span><br><span class="line"> &#123;</span><br><span class="line">  moveForward();</span><br><span class="line"> &#125;</span><br><span class="line"> distance = readPing();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int lookRight()</span><br><span class="line">&#123;</span><br><span class="line">    myservo.write(50); </span><br><span class="line">    delay(500);</span><br><span class="line">    int distance = readPing();</span><br><span class="line">    delay(100);</span><br><span class="line">    myservo.write(115); </span><br><span class="line">    return distance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int lookLeft()</span><br><span class="line">&#123;</span><br><span class="line">    myservo.write(170); </span><br><span class="line">    delay(500);</span><br><span class="line">    int distance = readPing();</span><br><span class="line">    delay(100);</span><br><span class="line">    myservo.write(115); </span><br><span class="line">    return distance;</span><br><span class="line">    delay(100);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int readPing() &#123; </span><br><span class="line">  delay(70);</span><br><span class="line">  int cm = sonar.ping_cm();</span><br><span class="line">  if(cm==0)</span><br><span class="line">  &#123;</span><br><span class="line">    cm = 250;</span><br><span class="line">  &#125;</span><br><span class="line">  return cm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void moveStop() &#123;</span><br><span class="line">  motor1.run(RELEASE); </span><br><span class="line">  motor2.run(RELEASE);</span><br><span class="line">  motor3.run(RELEASE);</span><br><span class="line">  motor4.run(RELEASE);</span><br><span class="line">  &#125; </span><br><span class="line">  </span><br><span class="line">void moveForward() &#123;</span><br><span class="line"></span><br><span class="line"> if(!goesForward)</span><br><span class="line">  &#123;</span><br><span class="line">    goesForward=true;</span><br><span class="line">    motor1.run(FORWARD);      </span><br><span class="line">    motor2.run(FORWARD);</span><br><span class="line">    motor3.run(FORWARD); </span><br><span class="line">    motor4.run(FORWARD);     </span><br><span class="line">   for (speedSet = 0; speedSet &lt; MAX_SPEED; speedSet +=2) // slowly bring the speed up to avoid loading down the batteries too quickly</span><br><span class="line">   &#123;</span><br><span class="line">    motor1.setSpeed(speedSet);</span><br><span class="line">    motor2.setSpeed(speedSet);</span><br><span class="line">    motor3.setSpeed(speedSet);</span><br><span class="line">    motor4.setSpeed(speedSet);</span><br><span class="line">    delay(5);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void moveBackward() &#123;</span><br><span class="line">    goesForward=false;</span><br><span class="line">    motor1.run(BACKWARD);      </span><br><span class="line">    motor2.run(BACKWARD);</span><br><span class="line">    motor3.run(BACKWARD);</span><br><span class="line">    motor4.run(BACKWARD);  </span><br><span class="line">  for (speedSet = 0; speedSet &lt; MAX_SPEED; speedSet +=2) // slowly bring the speed up to avoid loading down the batteries too quickly</span><br><span class="line">  &#123;</span><br><span class="line">    motor1.setSpeed(speedSet);</span><br><span class="line">    motor2.setSpeed(speedSet);</span><br><span class="line">    motor3.setSpeed(speedSet);</span><br><span class="line">    motor4.setSpeed(speedSet);</span><br><span class="line">    delay(5);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">void turnRight() &#123;</span><br><span class="line">  motor1.run(FORWARD);</span><br><span class="line">  motor2.run(FORWARD);</span><br><span class="line">  motor3.run(BACKWARD);</span><br><span class="line">  motor4.run(BACKWARD);     </span><br><span class="line">  delay(500);</span><br><span class="line">  motor1.run(FORWARD);      </span><br><span class="line">  motor2.run(FORWARD);</span><br><span class="line">  motor3.run(FORWARD);</span><br><span class="line">  motor4.run(FORWARD);      </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">void turnLeft() &#123;</span><br><span class="line">  motor1.run(BACKWARD);     </span><br><span class="line">  motor2.run(BACKWARD);  </span><br><span class="line">  motor3.run(FORWARD);</span><br><span class="line">  motor4.run(FORWARD);   </span><br><span class="line">  delay(500);</span><br><span class="line">  motor1.run(FORWARD);     </span><br><span class="line">  motor2.run(FORWARD);</span><br><span class="line">  motor3.run(FORWARD);</span><br><span class="line">  motor4.run(FORWARD);</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h2 id="四、注意事项"><a href="#四、注意事项" class="headerlink" title="四、注意事项"></a>四、注意事项</h2><p><strong>1. 使用18650作外部供电时，切记不要连反了线，否则会有烧芯片的风险。</strong><br><strong>2. 伺服电机应该选择限制旋转180°的sg90，而不能选择mg90一类的360舵机，原因是后者只能调正反转和速度，而不能像前者一样旋转固定的角度。</strong><br><strong>3. Arduino程序烧录时，有三个必要的支持库需要下载，下面是下载链接以及安装方式。</strong>  </p><blockquote><p>AFMotor Library <a href="https://learn.adafruit.com/adafruit-motor-shield/library-install">https://learn.adafruit.com/adafruit-motor-shield/library-install</a><br>NewPing Library <a href="https://github.com/livetronic/Arduino-NewPing">https://github.com/livetronic/Arduino-NewPing</a><br>Servo Library <a href="https://github.com/arduino-libraries/Servo.git">https://github.com/arduino-libraries/Servo.git</a> </p></blockquote><p><strong>点击 sketch（项目） &gt;&gt; Include Library（加载库） &gt;&gt; Add .ZIP File（添加zip.文件），把你下载好的库文件添加进去。</strong></p><h2 id="五、成品展示"><a href="#五、成品展示" class="headerlink" title="五、成品展示"></a>五、成品展示</h2><p><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gycjki1pbaj33401qohdu.jpg" alt="智能车.jpg"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;这是一个小巧简单的避障车的设计，也算是Arduino中比较火的项目了，试着学习了一下，通过项目来更深入的理解和应用Arduino。&lt;/p&gt;</summary>
    
    
    
    <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    
    <category term="单片机设计" scheme="http://yoursite.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
  </entry>
  
  <entry>
    <title>【学习记录】关于原博客向新电脑迁移的步骤</title>
    <link href="http://yoursite.com/2022/01/13/Migration_Blog/"/>
    <id>http://yoursite.com/2022/01/13/Migration_Blog/</id>
    <published>2022-01-13T13:37:04.000Z</published>
    <updated>2022-01-13T15:41:04.981Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>没想到刚开始更新Blog没几天就遇到了需要向新电脑迁移的事情，索性记录下来，由于没怎么接触过前端，个人网站搭建的过程始终让我感到新奇，每天感觉都是在接触新的知识。一开始想要迁移的时候还挺迷茫的，感觉这个过程肯定会有很多坑，没想到最后以外的简单顺利。</p><span id="more"></span><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><p>首先，新电脑肯定是需要安装好<code>nodejs</code>和<code>git</code>的,这是大的前提。</p><h2 id="文件的备份"><a href="#文件的备份" class="headerlink" title="文件的备份"></a>文件的备份</h2><p>文件的备份是个问题，究竟哪些文件是必要的哪些是可以舍弃掉的，一开始我的想法是只要带走博客的md文件就好了，大不了重新发布，然后就意识到这是新做一个网站了，那么把<code>_config.yml</code>文件带走呢？似乎也不够，我们还需要吧<code>themes</code>文件也拷贝过去。那么干脆将整个Blog根目录全部拷贝，但是这样会不会产生冲突？最后参考<a href="https://www.cnblogs.com/iHeling/p/14095937.html">如何迁移hexo博客到新电脑</a>这篇博客，确定了最终的文件。  </p><ul><li>_config.yml</li><li>themes</li><li>source</li><li>scaffolds</li><li>package.json</li><li>gitignore<br>这些文件都有其作用，文章作者如此描述：  <blockquote><p>从之前的博客文件夹中选择必须要拷贝的文件，备份起来。首先是之前自己修改的文件，像配置文件<code>_config.yml</code>,<code>theme</code>文件夹，<code>source</code>文件夹自己写的原始文件这些都是必须要拷贝走的。除此之外还有<code>scaffolds</code>文件夹(文件的模板)，<code>package.json</code>(使用哪些包)，<code>.gitignore</code>(提交忽略哪些文件夹)  </p></blockquote></li></ul><h2 id="正式迁移"><a href="#正式迁移" class="headerlink" title="正式迁移"></a>正式迁移</h2><p>以上准备好之后便开始迁移了，全局安装<code>hexo</code>是很有必要的。  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>然后我们新建一个博客文件夹<br>创建完成之后将我们备份来的文件放进文件夹内，<strong>之后不需要执行<code>hexo init</code>，直接<code>hexo clean&amp;hexo g&amp;hexo s</code>即可。</strong><br>接下来的步骤就与一开始搭建网站时一样了，为了push到github上去，我们需要获取ssh：<br>1.在博客文件夹中打开git bash，然后敲上  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yourname&quot;</span><br><span class="line">git config --global user.email &quot;youremail&quot;</span><br></pre></td></tr></table></figure><p>2.创建SSH,密码、路径之类的不用管，一直回车就好</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;youremail&quot;</span><br></pre></td></tr></table></figure><p>3.这个时候它会告诉你已经生成了<code>.ssh</code>的文件夹。在你的电脑中找到这个文件夹。<br>ssh，简单来讲，就是一个秘钥，其中，<code>id_rsa</code>是私人秘钥，<code>id_rsa.pub</code>是公共秘钥，可以随便给别人看。把这个公钥放在GitHub上，这样当你链接GitHub自己的账户时，它就会根据公钥匹配你的私钥，当能够相互匹配时，才能够顺利的通过git上传你的文件到GitHub上。<br>而后在GitHub的setting中，<br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gycdgqj3c3j30660eggmo.jpg" alt="1.png"><br>找到SSH and GPC keys的设置选项，<br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gycdetdr8sj30as0a2dha.jpg" alt="2.png"><br>点击New SSH key<br>把你的id_rsa.pub里面的信息复制进去,title随便填写。  </p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>直接发布自己的网站，就完成了个人博客的迁移。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;没想到刚开始更新Blog没几天就遇到了需要向新电脑迁移的事情，索性记录下来，由于没怎么接触过前端，个人网站搭建的过程始终让我感到新奇，每天感觉都是在接触新的知识。一开始想要迁移的时候还挺迷茫的，感觉这个过程肯定会有很多坑，没想到最后以外的简单顺利。&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="杂项" scheme="http://yoursite.com/tags/%E6%9D%82%E9%A1%B9/"/>
    
  </entry>
  
  <entry>
    <title>基于stc89c51Rc的扫码取件设计</title>
    <link href="http://yoursite.com/2022/01/12/ExpressageInfo/"/>
    <id>http://yoursite.com/2022/01/12/ExpressageInfo/</id>
    <published>2022-01-12T09:58:04.000Z</published>
    <updated>2022-01-12T06:31:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>一种通过取件码快速获得快递位置的设计。</p><span id="more"></span><h2 id="一、项目介绍"><a href="#一、项目介绍" class="headerlink" title="一、项目介绍"></a>一、项目介绍</h2><h3 id="1-课题意义"><a href="#1-课题意义" class="headerlink" title="1.课题意义"></a>1.课题意义</h3><p>当今时代，国内信息化步伐逐渐加快，随着互联网和电子商务的迅速发展和普及，网络购物已成为人们生活中不可缺少的一部分。现在快递服务业已发展到一定规模，但是快递服务效率却停滞不前。一个好的物流公司想要在这个社会站稳脚跟，需要的不仅仅是传输速度，更重要的是用合理的方法来加快精简各个步骤所需要花费的时间和精力，而快递网点系统是物流这个大模块中一个重要的子系统。单纯的人工取货费时费力，本设计以取件码为依据来实现快递的货物识别，取快递时出示取件码，扫码之后，对应的货物自动发声或发光提示其所在位置，据此想法，从而设计本系统。</p><h3 id="2-实现要求"><a href="#2-实现要求" class="headerlink" title="2.实现要求"></a>2.实现要求</h3><p>本课题是设计一个基于单片机的快递网点货物识别系统，以扫码模块、基于单片机的货物识别等关键技术为重点研究对象设计系统，研究设计的目标是在快递网点取货时更加方便，让客户在取货时出示取件码，扫码之后，对应的货物自动发声或者发光提示其所在位置，便于客户快速取件成功。同时需要了解系统原理、原理、特点、控制方式、应用情况、工作流程等，实现系统货物识别、声光控制等基本功能要求。</p><hr><h2 id="二、原件清单"><a href="#二、原件清单" class="headerlink" title="二、原件清单"></a>二、原件清单</h2><ul><li>Stc89c52Rc*1  </li><li>单片机最小系统*1  </li><li>QX1100扫码器*1  </li><li>有源蜂鸣器*3  </li><li>LED发光二极管*3  </li><li>1k电阻*12  </li><li>330Ω电阻*3  </li><li>npn三极管*3  </li><li>杜邦线 若干  </li><li>排针 若干  </li></ul><hr><h2 id="三、原理框图"><a href="#三、原理框图" class="headerlink" title="三、原理框图"></a>三、原理框图</h2><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gyarp1xvj5j30820cpt90.jpg" alt="快递信息二维码生成软件流程图" title="软件"><br>软件  </p><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gyarp1y4eoj30hq0duaau.jpg" alt="快递信息二维码读取硬件流程图" title="硬件"><br>硬件  </p><h2 id="三、电路连接"><a href="#三、电路连接" class="headerlink" title="三、电路连接"></a>三、电路连接</h2><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gyatt2ebp4j30ns0mhtls.jpg" alt="protues仿真连接（仅供参考）"><br>图中1、2、3为三个子端设备，即贴在快递上用来声光报警的设备。仿真图仅供连接参考，我本身是在草稿纸上画的线路因此这个仿真只体现大体思路。  </p><p><strong>注意：实际连接时P2口需接1k的上拉电阻来稳压，发光二极管串联330欧姆电阻，三极管基极接1k电阻。</strong> </p><hr><h2 id="四、实物展示"><a href="#四、实物展示" class="headerlink" title="四、实物展示"></a>四、实物展示</h2><h3 id="1-软件展示"><a href="#1-软件展示" class="headerlink" title="1.软件展示"></a>1.软件展示</h3><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gyau3ktfyhj30ag0g30tq.jpg" alt="软件界面">  </p><ul><li>在最上方生成二维码。</li><li>中间填入快递货架号，格式为xxx（<em>排、行、个，如：123，代表第一排第二行第三个</em>）。</li><li>点击录入会自动生成二维码并记录进快递列表。</li><li>点击快递列表即可查看存入快递。</li><li>点击“关闭”关闭应用。</li><li>在qq邮箱栏，输入qq邮箱点击发送会将二维码以邮件附件的形式发送给用户。</li><li>最下方是信息提示栏。  </li></ul><h3 id="2-硬件展示"><a href="#2-硬件展示" class="headerlink" title="2.硬件展示"></a>2.硬件展示</h3><p><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gyautmd500j30j60ya0vd.jpg" alt="背面"><br>背面（三个子端）<br><img src="http://tva1.sinaimg.cn/mw690/008ruEzYly1gyauu3cxrhj30tu1hcads.jpg" alt="正面"><br>正面（扫码器）</p><hr><h2 id="五、程序代码"><a href="#五、程序代码" class="headerlink" title="五、程序代码"></a>五、程序代码</h2><h3 id="1-软件程序"><a href="#1-软件程序" class="headerlink" title="1.软件程序"></a>1.软件程序</h3><p>软件是基于unity进行开发的，之所以不选用VS开发是因为对我个人来说unity的ui设计更加直观明了。两者都是用的C#语言，因此在代码方面实际上差别并不很大。以下贴一下关键代码：<br><strong>(1)QQ邮件发送代码</strong>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine;</span><br><span class="line">using System.Collections;</span><br><span class="line">using System;</span><br><span class="line">using System.Net;</span><br><span class="line">using System.Net.Mail;</span><br><span class="line">using System.Net.Security;</span><br><span class="line">using System.Security.Cryptography.X509Certificates;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line">public class Mail : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public GameObject Text_02,send;</span><br><span class="line">    public Vector2 creatPosition;</span><br><span class="line"></span><br><span class="line">    public void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (GameObject.Find(&quot;QQMileAdress&quot;).GetComponent&lt;Text&gt;().text.Length &lt;= 14)</span><br><span class="line">        &#123;</span><br><span class="line">            send.GetComponent&lt;Button&gt;().interactable = false;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            send.GetComponent&lt;Button&gt;().interactable = true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void SendEmail()</span><br><span class="line">    &#123;</span><br><span class="line">        MailMessage mail = new MailMessage();</span><br><span class="line"></span><br><span class="line">        mail.From = new MailAddress(&quot;xxx@qq.com&quot;);//发件人</span><br><span class="line">        mail.To.Add(GameObject.Find(&quot;QQMileAdress&quot;).GetComponent&lt;Text&gt;().text);//收件人</span><br><span class="line">        mail.Subject = &quot;Test Mail&quot;;//标题</span><br><span class="line">        mail.Body = &quot;This is for Me&quot;;//内容</span><br><span class="line">        mail.Attachments.Add(new Attachment(Application.dataPath + &quot;/&quot; + &quot;QR.png&quot;));//附件</span><br><span class="line"></span><br><span class="line">        SmtpClient smtpServer = new SmtpClient(&quot;smtp.qq.com&quot;);</span><br><span class="line">        smtpServer.Credentials = new System.Net.NetworkCredential(&quot;xxx@qq.com&quot;, &quot;xxxxxxxxxxxxxx&quot;) as ICredentialsByHost;</span><br><span class="line">        //Credentials证书    NetworkCredential网络证书     xxxxxxxxxxxxxx邮箱授权密码！</span><br><span class="line">        smtpServer.EnableSsl = true;</span><br><span class="line">        ServicePointManager.ServerCertificateValidationCallback =</span><br><span class="line">          delegate (object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)</span><br><span class="line">          &#123; return true; &#125;;</span><br><span class="line"></span><br><span class="line">        smtpServer.Send(mail);</span><br><span class="line">        Instantiate(Text_02, creatPosition, Quaternion.identity, GameObject.Find(&quot;Canvas&quot;).transform);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p><strong>(2)QR码生成</strong>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line">using ZXing;</span><br><span class="line">using ZXing.QrCode;</span><br><span class="line">using System.IO;</span><br><span class="line"></span><br><span class="line">public class QR_Code : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public string QrCodeStr;</span><br><span class="line">    public List&lt;string&gt; Mylist;</span><br><span class="line">    public GameObject Text, createPosition;</span><br><span class="line">    //在屏幕上显示二维码</span><br><span class="line">    public RawImage image;</span><br><span class="line">    public Text Items;</span><br><span class="line">    //存放二维码</span><br><span class="line">    Texture2D encoded;</span><br><span class="line">    int Nmuber = 0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        encoded = new Texture2D(256, 256);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (Input.GetKeyDown(KeyCode.Return))</span><br><span class="line">        &#123;</span><br><span class="line">            Sign();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    /// 定义方法生成二维码</span><br><span class="line">    private static Color32[] Encode(string textForEncoding, int width, int height)</span><br><span class="line">    &#123;</span><br><span class="line">        var writer = new BarcodeWriter</span><br><span class="line">        &#123;</span><br><span class="line">            Format = BarcodeFormat.QR_CODE,</span><br><span class="line">            Options = new QrCodeEncodingOptions</span><br><span class="line">            &#123;</span><br><span class="line">                Height = height,</span><br><span class="line">                Width = width</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        return writer.Write(textForEncoding);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /// 生成二维码</span><br><span class="line">    public void Btn_CreatQr()</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        if (QrCodeStr==null || GameObject.Find(&quot;number&quot;).GetComponent&lt;Text&gt;().text.Length&gt;0)</span><br><span class="line">        &#123;</span><br><span class="line">            QrCodeStr = GameObject.Find(&quot;number&quot;).GetComponent&lt;Text&gt;().text;</span><br><span class="line">            Mylist.Add(QrCodeStr+&quot;\n&quot;);</span><br><span class="line">            //二维码写入图片</span><br><span class="line">            var color32 = Encode(QrCodeStr, encoded.width, encoded.height);</span><br><span class="line">            encoded.SetPixels32(color32);</span><br><span class="line">            encoded.Apply();</span><br><span class="line">            //生成的二维码图片附给RawImage</span><br><span class="line">            image.texture = encoded;</span><br><span class="line">        &#125;</span><br><span class="line">        else </span><br><span class="line">        &#123;</span><br><span class="line">            Instantiate(Text, createPosition.transform.position, Quaternion.identity,transform);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Sign()</span><br><span class="line">    &#123;</span><br><span class="line">        Btn_CreatQr();</span><br><span class="line">        SaveTextureToFile();</span><br><span class="line">        Nmuber++;</span><br><span class="line">        if (Nmuber &gt;= QrCodeStr.Length)</span><br><span class="line">        &#123;</span><br><span class="line">            Nmuber = 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void list()</span><br><span class="line">    &#123;</span><br><span class="line">        Items.text = null;</span><br><span class="line">        foreach (var item in Mylist)</span><br><span class="line">        &#123;</span><br><span class="line">            Items.text += item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void Quit()</span><br><span class="line">    &#123;</span><br><span class="line">        Application.Quit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void SaveTextureToFile()</span><br><span class="line">    &#123;</span><br><span class="line">        var bytes = encoded.EncodeToPNG();</span><br><span class="line">        File.WriteAllBytes(Application.dataPath + &quot;/&quot; + &quot;QR.png&quot;, bytes);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>(3)52单片机程序</strong>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;reg52.h&quot;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">typedef unsigned int u16;//对系统默认数据类型进行重定义</span><br><span class="line">typedef unsigned char u8;</span><br><span class="line">typedef unsigned long u32;</span><br><span class="line"></span><br><span class="line">void delay_10us(u16 ten_us);</span><br><span class="line">void delay_ms(u16 ms);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">unsigned char num[][10]=&#123;&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;&#125;;</span><br><span class="line">u8 led[9]=&#123;0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80&#125;;</span><br><span class="line">u8 n;</span><br><span class="line">//****************************************************************************************</span><br><span class="line"></span><br><span class="line">void delay_10us(u16 ten_us)</span><br><span class="line">&#123;</span><br><span class="line">while(ten_us--);</span><br><span class="line">&#125;</span><br><span class="line">void delay_ms(u16 ms)</span><br><span class="line">&#123;</span><br><span class="line">u16 i,j;</span><br><span class="line">for(i=ms;i&gt;0;i--)</span><br><span class="line">for(j=110;j&gt;0;j--);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//****************************************************************************************</span><br><span class="line">void uart_init(u8 baud)</span><br><span class="line">&#123;</span><br><span class="line">TMOD|=0X20;//设置计数器工作方式2</span><br><span class="line">SCON=0X50;//设置为工作方式1</span><br><span class="line">PCON=0X80;//波特率加倍</span><br><span class="line">TH1=baud;//计数器初始值设置</span><br><span class="line">TL1=baud;</span><br><span class="line">ES=1;//打开接收中断</span><br><span class="line">EA=1;//打开总中断</span><br><span class="line">TR1=1;//打开计数器</span><br><span class="line">&#125;</span><br><span class="line">void main()</span><br><span class="line">&#123;</span><br><span class="line">int r;</span><br><span class="line">uart_init(0XFA);//波特率为9600</span><br><span class="line"></span><br><span class="line">while(1)</span><br><span class="line">&#123;</span><br><span class="line">if(n &gt;= &#x27;0&#x27; &amp;&amp; n &lt;= &#x27;9&#x27;)</span><br><span class="line">r=n-&#x27;0&#x27;;</span><br><span class="line">  P2=led[r];</span><br><span class="line">//lcd1602_init();//LCD1602初始化</span><br><span class="line">  //lcd1602_show_string(0,0,num[r]);//第一行显示</span><br><span class="line">delay_ms(10);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void uart() interrupt 4 //串口通信中断函数</span><br><span class="line">&#123;</span><br><span class="line">u8 rec_data;</span><br><span class="line"></span><br><span class="line">RI = 0;//清除接收中断标志位</span><br><span class="line">rec_data=SBUF;//存储接收到的数据</span><br><span class="line">n=rec_data;</span><br><span class="line">SBUF=rec_data;//将接收到的数据放入到发送寄存器</span><br><span class="line">while(!TI);//等待发送数据完成</span><br><span class="line">TI=0;//清除发送完成标志位</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>有一些用来控制ui动画的小代码就不放出来了，大家根据自己的需要去修改就好。 </p><hr><h2 id="六、设备运行结果"><a href="#六、设备运行结果" class="headerlink" title="六、设备运行结果"></a>六、设备运行结果</h2><p>视频我已上传百度云，需要看设备运行的可以下载来看<br>链接：<a href="https://pan.baidu.com/s/1Evjrf5T2KU6Vl3sgDGIIZQ">百度云</a><br>提取码：k2w6 </p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;一种通过取件码快速获得快递位置的设计。&lt;/p&gt;</summary>
    
    
    
    <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    <category term="单片机设计" scheme="http://yoursite.com/categories/IT/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    
    <category term="单片机设计" scheme="http://yoursite.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
  </entry>
  
  <entry>
    <title>【学习记录】MarkDown语法的学习与整理</title>
    <link href="http://yoursite.com/2022/01/12/MaikdownEdit/"/>
    <id>http://yoursite.com/2022/01/12/MaikdownEdit/</id>
    <published>2022-01-12T06:36:04.000Z</published>
    <updated>2022-01-12T07:17:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>接触了一小段时间的Markdown文件的编写了，深感他能被众人所推崇的确有其独特之处，因此开一篇博客记录下markdown常用的一些有语法，既是一种整理也是一个加深印象和巩固的过程。<br>感谢菜鸟教程的详细总结，省去了我不少时间，这里只介绍我常用到的，如果需要请点击链接来更全面的学习<a href="https://www.runoob.com/markdown/md-tutorial.html">菜鸟的Markdown教程</a>。</p><span id="more"></span><h2 id="一、Markdown标题"><a href="#一、Markdown标题" class="headerlink" title="一、Markdown标题"></a>一、Markdown标题</h2><p>Markdown的标题可以使用“#”+空格来进行分级，几级标题就写几个“#”，最多可至六级标题。<br>例子：  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure><p>效果👇</p><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><hr><h2 id="二、Markdown段落"><a href="#二、Markdown段落" class="headerlink" title="二、Markdown段落"></a>二、Markdown段落</h2><p>1.使用两个空格来换行<br>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">你好，世界！//无换行</span><br><span class="line">你好，  世界！//换行</span><br></pre></td></tr></table></figure><p>效果👇<br>你好，世界！//无换行</p><p>你好，<br>世界！//换行</p><p>2.使用三个以上“-”来画分割线<br>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">---</span><br></pre></td></tr></table></figure><p>效果👇  </p><hr><p>3.使用“*”来赋予不同的字体<br>例子：  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*斜体文本*</span><br><span class="line">**粗体文本**</span><br><span class="line">***粗斜体文本***</span><br></pre></td></tr></table></figure><p>效果👇<br><em>斜体文本</em><br><strong>粗体文本</strong><br><em><strong>粗斜体文本</strong></em>  </p><hr><h2 id="三、Markdown代码"><a href="#三、Markdown代码" class="headerlink" title="三、Markdown代码"></a>三、Markdown代码</h2><p>用“```”包裹一段代码，并指定一种语言（也可以不指定）<br>例子：  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">``` </span><br><span class="line">printf();</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>效果👇  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf();</span><br></pre></td></tr></table></figure><hr><h2 id="四、Markdown的链接形式"><a href="#四、Markdown的链接形式" class="headerlink" title="四、Markdown的链接形式"></a>四、Markdown的链接形式</h2><p>用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[链接名称](www.xxxxxx.com)</span><br></pre></td></tr></table></figure><p>的形式来生成一个不直接暴露网址的链接。<br>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[isNineSun&#x27;s Blog](www.isNineSun.github.io)</span><br></pre></td></tr></table></figure><p>效果👇<br><a href="www.isNineSun.github.io">isNineSun’s Blog</a><br><strong>如果你要直接引用网址而不用包装那么直接打进正文即可</strong></p><hr><h2 id="五、Markdown图片"><a href="#五、Markdown图片" class="headerlink" title="五、Markdown图片"></a>五、Markdown图片</h2><ul><li>开头一个感叹号!</li><li>然后是中括号[]，中间写上你的图片描述，<em>在点开图片的时候会显示</em>。</li><li>后面加上你的图片地址，也可以再多添加一个图片的“描述”。<br>例子：  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![_嘉然.jpg](http://tva1.sinaimg.cn/large/008ruEzYly1gyawosia27j30hs0hsmy2.jpg)</span><br><span class="line"></span><br><span class="line">![_嘉然.jpg](http://tva1.sinaimg.cn/large/008ruEzYly1gyawosia27j30hs0hsmy2.jpg &quot;嘉然&quot;)</span><br></pre></td></tr></table></figure>效果👇<br><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gyawosia27j30hs0hsmy2.jpg" alt="_嘉然.jpg"></li></ul><p><img src="http://tva1.sinaimg.cn/large/008ruEzYly1gyawosia27j30hs0hsmy2.jpg" alt="_嘉然.jpg" title="嘉然">  </p><hr><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>这是我日常中可能常用的几个语法的整理，如果你需要更全面的教程，欢迎去访问<a href="https://www.runoob.com/markdown/md-tutorial.html">菜鸟的Markdown教程</a>。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;接触了一小段时间的Markdown文件的编写了，深感他能被众人所推崇的确有其独特之处，因此开一篇博客记录下markdown常用的一些有语法，既是一种整理也是一个加深印象和巩固的过程。&lt;br&gt;感谢菜鸟教程的详细总结，省去了我不少时间，这里只介绍我常用到的，如果需要请点击链接来更全面的学习&lt;a href=&quot;https://www.runoob.com/markdown/md-tutorial.html&quot;&gt;菜鸟的Markdown教程&lt;/a&gt;。&lt;/p&gt;</summary>
    
    
    
    <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    <category term="杂项" scheme="http://yoursite.com/categories/IT/%E6%9D%82%E9%A1%B9/"/>
    
    
    <category term="IT" scheme="http://yoursite.com/tags/IT/"/>
    
    <category term="学习记录" scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>我的第一篇博客</title>
    <link href="http://yoursite.com/2022/01/11/MyFirstBlog/"/>
    <id>http://yoursite.com/2022/01/11/MyFirstBlog/</id>
    <published>2022-01-11T09:58:04.000Z</published>
    <updated>2022-01-11T17:54:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="嗨！"><a href="#嗨！" class="headerlink" title="嗨！"></a>嗨！</h2><p>幸会，这是我的第一篇博客，希望不会是最后一篇233，如果你对我感兴趣，可以看一看我下面的自述。</p><span id="more"></span><hr><h2 id="这个个人博客的目的"><a href="#这个个人博客的目的" class="headerlink" title="这个个人博客的目的"></a>这个个人博客的目的</h2><p>这个技术博客主要是为了能够更好的记录我在学习中会遇到的种种事情，可能是难题，可能是踩坑，可能是灵感，可能是新的技术，我的涉猎比较广，游戏、单片机、编程、绘画等等我都有兴趣，随着学的东西越来越多，我萌生出将自己所学记录下来的想法，一个个人博客想来是再好不过的方式了，我会尽量在知乎等大的平台上同步更新。<br>我在学习中也不止一次的被他人的技术博客所拯救，一个百思不得其解的问题可能在他人的技术博客中用一两句话就说明白了，颇有“听君一席话胜读十年书”的感觉，我希望我的技术博客也能够帮到每一个人！</p><hr><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>以上，就结束了我简短的第一篇博客，希望在今后的日子里我能够先将自己的博客充实起来。<br><img src="https://s2.loli.net/2022/01/12/rGQZiH2Fal51BVq.png" alt="This is me" title="This is not me"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;嗨！&quot;&gt;&lt;a href=&quot;#嗨！&quot; class=&quot;headerlink&quot; title=&quot;嗨！&quot;&gt;&lt;/a&gt;嗨！&lt;/h2&gt;&lt;p&gt;幸会，这是我的第一篇博客，希望不会是最后一篇233，如果你对我感兴趣，可以看一看我下面的自述。&lt;/p&gt;</summary>
    
    
    
    <category term="All" scheme="http://yoursite.com/categories/All/"/>
    
    <category term="随笔" scheme="http://yoursite.com/categories/All/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="all" scheme="http://yoursite.com/tags/all/"/>
    
  </entry>
  
</feed>
